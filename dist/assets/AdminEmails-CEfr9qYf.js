import{y as ie,r as a,f as me,j as e,ap as k,aH as q,i as h,n as O,o as U,v as j,q as f,I as n,aG as ae,B as P,L as y,af as _,p as te,ac as le,C as re,s as w,x as S}from"./index-sAk8NP6L.js";import{B as v}from"./badge-BMp3Ap5Z.js";import{T as ne,a as oe,b as B,c as F}from"./tabs-DBDPkN5a.js";import{H}from"./history-Be-SjILf.js";import"./index-C7v0xTEb.js";import"./index-Do89sa3o.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ce=ie("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),x={operational:{name:"Service operationnel",title:"One SMS est maintenant pleinement operationnel",message:"Nous sommes ravis de vous annoncer que la plateforme One SMS fonctionne maintenant a 100% de ses capacites. Vous pouvez des maintenant louer des numeros temporaires et recevoir vos SMS de verification en temps reel.",icon:""},maintenance:{name:"Maintenance programmee",title:"Maintenance technique prevue",message:"Une maintenance technique est prevue le [DATE] de [HEURE] a [HEURE]. Durant cette periode, certains services pourraient etre temporairement indisponibles. Nous nous excusons pour la gene occasionnee.",icon:""},incident:{name:"Incident resolu",title:"Le service est retabli",message:"Suite a un incident technique, tous nos services sont maintenant retablis et fonctionnent normalement. Merci pour votre patience et votre comprehension.",icon:""},new_feature:{name:"Nouvelle fonctionnalite",title:"Nouvelle fonctionnalite disponible",message:"Decouvrez notre nouvelle fonctionnalite : [DESCRIPTION]. Cette amelioration vous permet de [AVANTAGE]. Connectez-vous pour l'essayer des maintenant.",icon:""},welcome_back:{name:"Retour utilisateur inactif",title:"Nous vous avons manque",message:"Cela fait un moment que nous ne vous avons pas vu. Revenez decouvrir nos nouveaux services et profitez de votre solde pour activer vos comptes en toute securite.",icon:""},security:{name:"Alerte securite",title:"Information de securite importante",message:"Par mesure de securite, nous vous recommandons de [ACTION]. Cette demarche garantit la protection de votre compte et de vos donnees personnelles.",icon:""},promo:{name:"Promotion Offre",title:"",message:"",icon:""},custom:{name:"Message personnalise",title:"",message:"",icon:""}};function be(){const[G,C]=a.useState("compose"),[m,K]=a.useState("operational"),[t,o]=a.useState(""),[r,c]=a.useState(""),[d,g]=a.useState(""),[u,D]=a.useState(""),[N,$]=a.useState(""),[p,J]=a.useState(""),[V,Q]=a.useState(""),[E,W]=a.useState(""),[A,X]=a.useState(""),[T,I]=a.useState(!1),[b,R]=a.useState(null),[z,L]=a.useState(!1),{data:M,isLoading:Y,refetch:Z}=me({queryKey:["email-campaigns"],queryFn:async()=>{const{data:s,error:i}=await w.from("email_campaigns").select("*").order("created_at",{ascending:!1}).limit(50);if(i)throw i;return s}}),ee=async()=>{L(!0);try{let s=w.from("users").select("id",{count:"exact",head:!0}).not("email","is",null);N&&(s=s.gte("balance",parseFloat(N))),p&&(s=s.lte("balance",parseFloat(p))),E&&(s=s.limit(parseInt(E)));const{count:i,error:l}=await s;if(l)throw l;R(i||0)}catch(s){console.error("Error fetching preview:",s),S({title:"Erreur",description:"Impossible de calculer le nombre de destinataires",variant:"destructive"})}finally{L(!1)}},se=async()=>{if(!t.trim()||!r.trim()){S({title:"Champs requis",description:"Le titre et le message sont obligatoires",variant:"destructive"});return}I(!0);try{const{data:{session:s}}=await w.auth.getSession();if(!(s!=null&&s.access_token))throw new Error("Non authentifi√©");const i=await fetch("https://htfqmamvmhdoixqcbbbw.supabase.co/functions/v1/send-promo-emails",{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s.access_token}`},body:JSON.stringify({title:t,message:r,emailType:m,promoCode:d||void 0,discount:u||void 0,filter:{...N&&{minBalance:parseFloat(N)},...p&&{maxBalance:parseFloat(p)},...V&&{inactiveDays:parseInt(V)},...E&&{limit:parseInt(E)},...A&&{offset:parseInt(A)}}})}),l=await i.json();if(!i.ok)throw new Error(l.error||"Erreur lors de l'envoi");S({title:"‚úÖ Emails envoy√©s !",description:`${l.sent} emails envoy√©s sur ${l.total} destinataires`}),o(""),c(""),g(""),D(""),R(null),Z(),C("history")}catch(s){console.error("Send error:",s),S({title:"Erreur",description:s.message,variant:"destructive"})}finally{I(!1)}};return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(k,{className:"h-6 w-6 text-purple-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:239,columnNumber:13},this),"Emails Marketing"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:238,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Envoyez des emails promotionnels √† vos utilisateurs"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:242,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:237,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:236,columnNumber:7},this),e.jsxDEV(ne,{value:G,onValueChange:C,children:[e.jsxDEV(oe,{className:"grid w-full max-w-md grid-cols-2",children:[e.jsxDEV(B,{value:"compose",className:"flex items-center gap-2",children:[e.jsxDEV(q,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:251,columnNumber:13},this),"Composer"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:250,columnNumber:11},this),e.jsxDEV(B,{value:"history",className:"flex items-center gap-2",children:[e.jsxDEV(H,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:255,columnNumber:13},this),"Historique"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:254,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:249,columnNumber:9},this),e.jsxDEV(F,{value:"compose",className:"space-y-6",children:e.jsxDEV("div",{className:"grid gap-6 lg:grid-cols-2",children:[e.jsxDEV(h,{children:[e.jsxDEV(O,{children:[e.jsxDEV(U,{className:"flex items-center gap-2",children:[e.jsxDEV(k,{className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:267,columnNumber:19},this),"Contenu de l'email"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:266,columnNumber:17},this),e.jsxDEV(j,{children:"Composez votre message aux utilisateurs"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:270,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:265,columnNumber:15},this),e.jsxDEV(f,{className:"space-y-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Type d'email *"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:277,columnNumber:19},this),e.jsxDEV("select",{value:m,onChange:s=>{const i=s.target.value;K(i);const l=x[i];i!=="custom"&&i!=="promo"?(o(l.title),c(l.message)):(o(""),c("")),i!=="promo"&&(g(""),D(""))},className:"w-full p-2 border rounded-md",children:Object.entries(x).map(([s,i])=>e.jsxDEV("option",{value:s,children:[i.icon," ",i.name]},s,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:300,columnNumber:23},this))},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:278,columnNumber:19},this),m==="custom"&&e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Mode libre : ecrivez votre propre message personnalise"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:306,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:276,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:["Titre *",m!=="custom"&&m!=="promo"&&e.jsxDEV("button",{type:"button",onClick:()=>{const s=x[m];o(s.title)},className:"ml-2 text-xs text-blue-600 hover:underline",children:"Restaurer le template"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:316,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:313,columnNumber:19},this),e.jsxDEV(n,{value:t,onChange:s=>o(s.target.value),placeholder:m==="custom"?"Ex: Annonce importante":"Ex: One SMS est op√©rationnel",className:"text-lg"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:328,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:[t.length,"/60 caract√®res (optimal pour √©viter le spam)"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:334,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:312,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:["Message *",m!=="custom"&&m!=="promo"&&e.jsxDEV("button",{type:"button",onClick:()=>{const s=x[m];c(s.message)},className:"ml-2 text-xs text-blue-600 hover:underline",children:"Restaurer le template"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:343,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:340,columnNumber:19},this),e.jsxDEV(ae,{value:r,onChange:s=>c(s.target.value),placeholder:m==="custom"?"R√©digez votre message personnalis√©...":"√âcrivez votre message ici...",rows:m==="custom"?8:6},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:355,columnNumber:19},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground mt-1",children:"Conseil : Soyez clair et concis. Evitez les majuscules excessives et les mots spam (GRATUIT, URGENT, etc.)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:361,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:339,columnNumber:17},this),m==="promo"&&e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Code promo (optionnel)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:370,columnNumber:23},this),e.jsxDEV(n,{value:d,onChange:s=>g(s.target.value.toUpperCase()),placeholder:"BLACK50"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:371,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:369,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"R√©duction (optionnel)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:378,columnNumber:23},this),e.jsxDEV(n,{value:u,onChange:s=>D(s.target.value),placeholder:"-50%"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:379,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:377,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:368,columnNumber:19},this),(t||r)&&e.jsxDEV("div",{className:"mt-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[e.jsxDEV("div",{className:"text-xs text-muted-foreground mb-2",children:"Apercu de l'email :"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:391,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2 mb-2",children:e.jsxDEV("div",{className:"font-semibold text-blue-900",children:t||"Titre..."},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:393,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:392,columnNumber:21},this),e.jsxDEV("div",{className:"text-sm text-gray-700 mt-1 leading-relaxed",children:r||"Message..."},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:395,columnNumber:21},this),(d||u)&&e.jsxDEV("div",{className:"mt-3 flex gap-2",children:[u&&e.jsxDEV(v,{className:"bg-green-600",children:u},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:398,columnNumber:38},this),d&&e.jsxDEV(v,{variant:"outline",className:"border-green-600 text-green-700",children:d},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:399,columnNumber:39},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:397,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:390,columnNumber:19},this),e.jsxDEV("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxDEV("div",{className:"text-xs font-medium text-yellow-800 mb-1",children:"Score anti-spam"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:407,columnNumber:19},this),e.jsxDEV("div",{className:"text-xs text-yellow-700 space-y-1",children:[e.jsxDEV("div",{children:"[OK] Structure HTML simple"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:409,columnNumber:21},this),e.jsxDEV("div",{children:"[OK] Lien de desinscription"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:410,columnNumber:21},this),e.jsxDEV("div",{className:r.match(/GRATUIT|URGENT|PROMO|!!!|‚Ç¨‚Ç¨‚Ç¨/gi)?"text-red-600":"text-green-600",children:r.match(/GRATUIT|URGENT|PROMO|!!!|‚Ç¨‚Ç¨‚Ç¨/gi)?"[ALERTE] Mots spam detectes":"[OK] Pas de mots spam"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:411,columnNumber:21},this),e.jsxDEV("div",{className:t.length>60?"text-orange-600":"text-green-600",children:t.length>60?"[ATTENTION] Titre trop long (max 60 car.)":"[OK] Titre optimal"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:414,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:408,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:406,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:274,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:264,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV(h,{children:[e.jsxDEV(O,{children:[e.jsxDEV(U,{className:"flex items-center gap-2",children:[e.jsxDEV(ce,{className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:427,columnNumber:21},this),"Ciblage (optionnel)"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:426,columnNumber:19},this),e.jsxDEV(j,{children:"Filtrez les destinataires"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:430,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:425,columnNumber:17},this),e.jsxDEV(f,{className:"space-y-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Solde min (‚í∂)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:437,columnNumber:23},this),e.jsxDEV(n,{type:"number",value:N,onChange:s=>$(s.target.value),placeholder:"0"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:438,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:436,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Solde max (‚í∂)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:446,columnNumber:23},this),e.jsxDEV(n,{type:"number",value:p,onChange:s=>J(s.target.value),placeholder:"100"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:447,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:445,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:435,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Inactifs depuis (jours)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:458,columnNumber:23},this),e.jsxDEV(n,{type:"number",value:V,onChange:s=>Q(s.target.value),placeholder:"30"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:459,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:457,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Limite max"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:467,columnNumber:23},this),e.jsxDEV(n,{type:"number",value:E,onChange:s=>W(s.target.value),placeholder:"1000"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:468,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:466,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:456,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block flex items-center gap-2",children:[e.jsxDEV("span",{children:"Offset (commencer √† partir de)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:480,columnNumber:25},this),e.jsxDEV("span",{className:"text-xs text-gray-500",children:"‚ö†Ô∏è Important pour √©viter doublons"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:481,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:479,columnNumber:23},this),e.jsxDEV(n,{type:"number",value:A,onChange:s=>X(s.target.value),placeholder:"0"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:483,columnNumber:23},this),e.jsxDEV("p",{className:"text-xs text-gray-500 mt-1",children:"Ex: 218 pour commencer apr√®s les 218 premiers"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:489,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:478,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-end",children:e.jsxDEV("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3 text-xs text-blue-800",children:[e.jsxDEV("p",{className:"font-semibold mb-1",children:"üí° Astuce"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:495,columnNumber:25},this),e.jsxDEV("p",{children:"Utilisez offset pour envoyer par batches et √©viter les timeouts"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:496,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:494,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:493,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:477,columnNumber:19},this),e.jsxDEV(P,{variant:"outline",className:"w-full",onClick:ee,disabled:z,children:[z?e.jsxDEV(y,{className:"h-4 w-4 mr-2 animate-spin"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:508,columnNumber:23},this):e.jsxDEV(_,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:510,columnNumber:23},this),"Pr√©visualiser les destinataires"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:501,columnNumber:19},this),b!==null&&e.jsxDEV("div",{className:"flex items-center gap-2 p-3 bg-blue-50 rounded-lg",children:[e.jsxDEV(_,{className:"h-5 w-5 text-blue-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:517,columnNumber:23},this),e.jsxDEV("span",{className:"font-medium",children:b},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:518,columnNumber:23},this),e.jsxDEV("span",{className:"text-muted-foreground",children:"utilisateurs cibl√©s"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:519,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:516,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:434,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:424,columnNumber:15},this),e.jsxDEV(h,{className:"bg-gradient-to-r from-blue-500 to-cyan-500 text-white",children:e.jsxDEV(f,{className:"pt-6",children:[e.jsxDEV("div",{className:"mb-4 text-center",children:[e.jsxDEV("div",{className:"text-sm opacity-90 mb-1",children:"Type d'email"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:529,columnNumber:21},this),e.jsxDEV("div",{className:"text-lg font-bold",children:x[m].name},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:530,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:528,columnNumber:19},this),e.jsxDEV(P,{size:"lg",className:"w-full bg-white text-blue-600 hover:bg-gray-100",onClick:se,disabled:T||!t.trim()||!r.trim(),children:T?e.jsxDEV(e.Fragment,{children:[e.jsxDEV(y,{className:"h-5 w-5 mr-2 animate-spin"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:540,columnNumber:25},this),"Envoi en cours..."]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:539,columnNumber:23},this):e.jsxDEV(e.Fragment,{children:[e.jsxDEV(q,{className:"h-5 w-5 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:545,columnNumber:25},this),"Envoyer la campagne"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:544,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:532,columnNumber:19},this),e.jsxDEV("p",{className:"text-center text-sm mt-3 text-white/80",children:b!==null?`${b} emails seront envoy√©s`:"Cliquez sur pr√©visualiser pour voir le nombre"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:550,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:527,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:526,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:423,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:262,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:261,columnNumber:9},this),e.jsxDEV(F,{value:"history",children:e.jsxDEV(h,{children:[e.jsxDEV(O,{children:[e.jsxDEV(U,{className:"flex items-center gap-2",children:[e.jsxDEV(H,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:567,columnNumber:17},this),"Historique des campagnes"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:566,columnNumber:15},this),e.jsxDEV(j,{children:"Toutes les campagnes emails envoy√©es"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:570,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:565,columnNumber:13},this),e.jsxDEV(f,{children:Y?e.jsxDEV("div",{className:"flex items-center justify-center py-8",children:e.jsxDEV(y,{className:"h-6 w-6 animate-spin text-muted-foreground"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:577,columnNumber:19},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:576,columnNumber:17},this):M&&M.length>0?e.jsxDEV("div",{className:"space-y-4",children:M.map(s=>e.jsxDEV("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxDEV("div",{className:"flex-1",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("span",{className:"font-medium",children:s.title},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:588,columnNumber:27},this),s.promo_code&&e.jsxDEV(v,{variant:"outline",className:"border-green-600 text-green-700",children:s.promo_code},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:590,columnNumber:29},this),s.discount&&e.jsxDEV(v,{className:"bg-green-600",children:s.discount},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:593,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:587,columnNumber:25},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground line-clamp-1 mt-1",children:s.message},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:596,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:586,columnNumber:23},this),e.jsxDEV("div",{className:"flex items-center gap-6 ml-4",children:[e.jsxDEV("div",{className:"text-right",children:[e.jsxDEV("div",{className:"flex items-center gap-1",children:[s.status==="sent"?e.jsxDEV(te,{className:"h-4 w-4 text-green-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:605,columnNumber:31},this):e.jsxDEV(le,{className:"h-4 w-4 text-yellow-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:607,columnNumber:31},this),e.jsxDEV("span",{className:"font-medium",children:[s.sent_count,"/",s.total_recipients]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:609,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:603,columnNumber:27},this),e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:"emails envoy√©s"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:613,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:602,columnNumber:25},this),e.jsxDEV("div",{className:"text-right",children:e.jsxDEV("div",{className:"flex items-center gap-1 text-muted-foreground",children:[e.jsxDEV(re,{className:"h-3 w-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:618,columnNumber:29},this),e.jsxDEV("span",{className:"text-sm",children:new Date(s.sent_at||s.created_at).toLocaleDateString("fr-FR",{day:"numeric",month:"short",hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:619,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:617,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:616,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:601,columnNumber:23},this)]},s.id,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:582,columnNumber:21},this))},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:580,columnNumber:17},this):e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV(k,{className:"h-12 w-12 mx-auto mb-4 opacity-20"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:635,columnNumber:19},this),e.jsxDEV("p",{children:"Aucune campagne envoy√©e"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:636,columnNumber:19},this),e.jsxDEV("p",{className:"text-sm",children:"Composez votre premier email promotionnel"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:637,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:634,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:574,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:564,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:563,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:248,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminEmails.tsx",lineNumber:234,columnNumber:5},this)}export{be as default};
