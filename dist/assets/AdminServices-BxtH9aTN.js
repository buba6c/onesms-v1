import{a as w,r as p,u as C,c as L,f as S,j as e,B as g,L as E,R as D,i as v,q as V,g as q,I as F,ak as $,aw as T}from"./index-7t0jIj9n.js";import{u as y}from"./useMutation-B1PGow3p.js";import{B as K}from"./badge-Ofs191VZ.js";import{t as _,u as I,g as P,a as Q,b as B}from"./sync-service-DOGGH9pI.js";import{g as R,a as z,d as W}from"./logo-service-D-UU2wJF.js";const Y=(i,n)=>{const r=i.target;if(r.dataset.fallbackLoaded==="true"){r.style.display="none";const m=r.nextElementSibling;m&&(m.style.display="flex");return}if(n)r.dataset.fallbackLoaded="true",r.src=W(n);else{r.style.display="none";const m=r.nextElementSibling;m&&(m.style.display="flex")}};function ee(){var h;const{t:i}=w(),[n,r]=p.useState(""),[m,A]=p.useState("all"),[c,k]=p.useState("all"),{toast:N}=C(),d=L(),{data:x=[],isLoading:j}=S({queryKey:["admin-services",n,m,c],queryFn:async()=>await P({search:n||void 0,category:m!=="all"?m:void 0,active:c==="active"?!0:c==="inactive"?!1:void 0})}),{data:a}=S({queryKey:["service-stats"],queryFn:Q}),{data:t}=S({queryKey:["latest-sync"],queryFn:B,refetchInterval:5e3}),o=y({mutationFn:_,onSuccess:s=>{var l,u,f;s.success?(N({title:i("admin.sync.syncCompleted"),description:`${i("admin.sync.synced")} ${((l=s.stats)==null?void 0:l.services)||0} ${i("admin.services").toLowerCase()}, ${((u=s.stats)==null?void 0:u.countries)||0} ${i("admin.countries").toLowerCase()}, ${((f=s.stats)==null?void 0:f.prices)||0} ${i("admin.pricing").toLowerCase()}`}),d.invalidateQueries({queryKey:["admin-services"]}),d.invalidateQueries({queryKey:["service-stats"]}),d.invalidateQueries({queryKey:["latest-sync"]})):N({title:i("admin.sync.syncFailed"),description:s.error,variant:"destructive"})}}),b=y({mutationFn:({id:s,updates:l})=>I(s,l),onSuccess:()=>{d.invalidateQueries({queryKey:["admin-services"]}),N({title:i("admin.servicesPage.serviceUpdated")})}}),M=s=>{b.mutate({id:s.id,updates:{active:!s.active}})},U=s=>{b.mutate({id:s.id,updates:{popularity_score:s.popularity_score>=50?0:100}})},O=[{label:i("admin.totalServices"),value:(a==null?void 0:a.totalServices)||0,color:"text-gray-500"},{label:i("admin.activeServices"),value:(a==null?void 0:a.activeServices)||0,color:"text-green-500"},{label:i("admin.popularServices"),value:(a==null?void 0:a.popularServices)||0,color:"text-orange-500"},{label:i("admin.totalNumbers"),value:((h=a==null?void 0:a.totalAvailable)==null?void 0:h.toLocaleString())||"0",color:"text-blue-500"}];return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold",children:i("admin.servicesManagement")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:142,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-500",children:[(a==null?void 0:a.activeServices)||0," active / ",(a==null?void 0:a.totalServices)||0," services"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:143,columnNumber:11},this),t&&e.jsxDEV("p",{className:"text-xs text-gray-400 mt-1",children:["Last sync: ",new Date(t.started_at).toLocaleString()," - ",t.status]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:147,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:141,columnNumber:9},this),e.jsxDEV(g,{variant:"default",className:"bg-purple-600 hover:bg-purple-700",onClick:()=>o.mutate(),disabled:o.isPending||(t==null?void 0:t.status)==="running",children:[o.isPending||(t==null?void 0:t.status)==="running"?e.jsxDEV(E,{className:"w-4 h-4 mr-2 animate-spin"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:159,columnNumber:13},this):e.jsxDEV(D,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:161,columnNumber:13},this),i("admin.syncWithSMSActivate")]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:152,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:140,columnNumber:7},this),e.jsxDEV(v,{children:e.jsxDEV(V,{className:"p-4",children:e.jsxDEV("div",{className:"flex flex-col md:flex-row gap-4",children:[e.jsxDEV("div",{className:"flex-1 relative",children:[e.jsxDEV(q,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:172,columnNumber:15},this),e.jsxDEV(F,{placeholder:i("admin.searchServices"),value:n,onChange:s=>r(s.target.value),className:"pl-10"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:173,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:171,columnNumber:13},this),e.jsxDEV("select",{value:m,onChange:s=>A(s.target.value),className:"px-4 py-2 border rounded-lg",children:[e.jsxDEV("option",{value:"all",children:i("admin.allCategories")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:185,columnNumber:15},this),e.jsxDEV("option",{value:"social",children:i("admin.social")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:186,columnNumber:15},this),e.jsxDEV("option",{value:"tech",children:i("admin.tech")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:187,columnNumber:15},this),e.jsxDEV("option",{value:"other",children:i("admin.other")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:188,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:180,columnNumber:13},this),e.jsxDEV("select",{value:c,onChange:s=>k(s.target.value),className:"px-4 py-2 border rounded-lg",children:[e.jsxDEV("option",{value:"all",children:i("admin.allStatus")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:195,columnNumber:15},this),e.jsxDEV("option",{value:"active",children:i("admin.active")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:196,columnNumber:15},this),e.jsxDEV("option",{value:"inactive",children:i("admin.inactive")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:197,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:190,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:170,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:169,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:168,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:O.map((s,l)=>e.jsxDEV(v,{children:e.jsxDEV(V,{className:"p-6",children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:s.label},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:208,columnNumber:15},this),e.jsxDEV("h3",{className:`text-2xl font-bold mt-1 ${s.color}`,children:s.value},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:209,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:207,columnNumber:13},this)},l,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:206,columnNumber:11},this))},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:204,columnNumber:7},this),e.jsxDEV(v,{children:j?e.jsxDEV("div",{className:"p-12 text-center",children:[e.jsxDEV(E,{className:"w-8 h-8 animate-spin mx-auto mb-4 text-blue-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:219,columnNumber:13},this),e.jsxDEV("p",{className:"text-gray-500",children:i("admin.loadingServices")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:220,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:218,columnNumber:11},this):x.length===0?e.jsxDEV("div",{className:"p-12 text-center",children:[e.jsxDEV("p",{className:"text-gray-500 mb-4",children:i("admin.noServicesFound")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:224,columnNumber:13},this),e.jsxDEV(g,{onClick:()=>o.mutate(),className:"bg-purple-600",children:[e.jsxDEV(D,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:226,columnNumber:15},this),"Synchroniser avec SMS-Activate"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:225,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:223,columnNumber:11},this):e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50 border-b",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:235,columnNumber:19},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Status"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:236,columnNumber:19},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Category"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:237,columnNumber:19},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Popular"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:238,columnNumber:19},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Available"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:239,columnNumber:19},this),e.jsxDEV("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:240,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:234,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:233,columnNumber:15},this),e.jsxDEV("tbody",{className:"divide-y",children:x.map(s=>{var l;return e.jsxDEV("tr",{className:"hover:bg-gray-50",children:[e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 rounded-lg bg-white border border-gray-200 flex items-center justify-center overflow-hidden",children:[e.jsxDEV("img",{src:R(s.code),alt:s.name,className:"w-8 h-8 object-contain",onError:u=>Y(u,s.code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:249,columnNumber:27},this),e.jsxDEV("span",{className:"text-2xl hidden",children:z(s.code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:255,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:248,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-medium",children:[s.display_name||s.name,e.jsxDEV("span",{className:"text-gray-400 font-normal ml-1",children:["(",s.code,")"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:260,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:258,columnNumber:27},this),e.jsxDEV("div",{className:"text-xs text-gray-500",children:["Code: ",s.code]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:262,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:257,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:247,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:246,columnNumber:21},this),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV(K,{variant:s.active?"success":"destructive",children:s.active?"Active":"Inactive"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:267,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:266,columnNumber:21},this),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("span",{className:"text-sm capitalize",children:s.category},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:272,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:271,columnNumber:21},this),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("span",{className:"text-sm",children:s.popularity_score>=50?"â­ Yes":"No"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:275,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:274,columnNumber:21},this),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("span",{className:"text-green-500 font-medium",children:((l=s.total_available)==null?void 0:l.toLocaleString())||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:278,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:277,columnNumber:21},this),e.jsxDEV("td",{className:"px-6 py-4",children:e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV("button",{onClick:()=>U(s),className:"p-1 hover:bg-gray-100 rounded",title:"Toggle Popular",children:e.jsxDEV($,{className:`w-4 h-4 ${s.popularity_score>=50?"text-yellow-500 fill-yellow-500":"text-gray-400"}`},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:289,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:284,columnNumber:25},this),e.jsxDEV("button",{onClick:()=>M(s),className:"p-1 hover:bg-gray-100 rounded",title:"Toggle Active",children:e.jsxDEV(T,{className:`w-4 h-4 ${s.active?"text-orange-500":"text-green-500"}`},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:296,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:291,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:283,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:282,columnNumber:21},this)]},s.id,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:245,columnNumber:19},this)})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:243,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:232,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:231,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:216,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminServices.tsx",lineNumber:138,columnNumber:5},this)}export{ee as default};
