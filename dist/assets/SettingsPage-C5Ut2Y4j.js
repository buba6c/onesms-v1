import{a as b,e as x,u as p,b as S,r as c,s as n,j as e,k as f,B as o,af as h,T as D}from"./index-Dwn6GNXK.js";function v(){const{t:E}=b(),i=x(),{toast:r}=p(),{user:s,signOut:l}=S(),[a,u]=c.useState({email:(s==null?void 0:s.email)||"",id:(s==null?void 0:s.id)||"",balance:0,frozenBalance:0});c.useEffect(()=>{N()},[s==null?void 0:s.id]);const N=async()=>{if(s!=null&&s.id)try{const{data:t,error:m}=await n.from("users").select("email, id, balance").eq("id",s.id).single();if(m)throw m;t&&u({email:t.email,id:t.id,balance:t.balance||0,frozenBalance:0})}catch(t){console.error("Error fetching user data:",t)}},g=async()=>{await l(),i("/login")},d=async()=>{if(confirm("Êtes-vous sûr de vouloir supprimer votre compte ? Cette action est irréversible."))try{await n.from("users").delete().eq("id",s==null?void 0:s.id),await l(),i("/"),r({title:"Compte supprimé",description:"Votre compte a été supprimé avec succès"})}catch{r({title:"Erreur",description:"Impossible de supprimer le compte",variant:"destructive"})}};return e.jsxDEV("div",{className:"min-h-screen bg-gray-50 py-12",children:e.jsxDEV("div",{className:"container mx-auto px-4 max-w-2xl",children:e.jsxDEV(f,{className:"shadow-lg",children:e.jsxDEV("div",{className:"p-8",children:[e.jsxDEV("h1",{className:"text-3xl font-bold text-center mb-8",children:"My account"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:90,columnNumber:13},this),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-500 block mb-2",children:"Your email"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:95,columnNumber:17},this),e.jsxDEV("p",{className:"text-lg font-medium",children:a.email},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:96,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:94,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-500 block mb-2",children:"Your ID"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:101,columnNumber:17},this),e.jsxDEV("p",{className:"text-lg font-medium",children:a.id},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:102,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:100,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-500 block mb-2",children:"Current balance"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:107,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:Math.floor(a.balance)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:108,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:106,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm text-gray-500 block mb-2",children:"Frozen balance"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:113,columnNumber:17},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:a.frozenBalance},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:114,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:112,columnNumber:15},this),e.jsxDEV(o,{onClick:g,className:"w-full bg-blue-600 hover:bg-blue-700 text-white h-12 text-lg font-medium",children:[e.jsxDEV(h,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:122,columnNumber:17},this),"Logout"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:118,columnNumber:15},this),e.jsxDEV(o,{onClick:d,variant:"outline",className:"w-full border-2 border-red-500 text-red-500 hover:bg-red-50 h-12 text-lg font-medium",children:[e.jsxDEV(D,{className:"w-5 h-5 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:132,columnNumber:17},this),"Delete"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:127,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:92,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:89,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:88,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:87,columnNumber:7},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/SettingsPage.tsx",lineNumber:86,columnNumber:5},this)}export{v as default};
