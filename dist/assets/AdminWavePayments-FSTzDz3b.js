import{u as _,c as I,r as V,f as F,j as e,C as p,i as l,av as D,p as b,t as y,g as q,I as R,B as c,R as L,at as z,ah as Q,s as N}from"./index-7t0jIj9n.js";import{u as W}from"./useMutation-B1PGow3p.js";import{B as P}from"./badge-Ofs191VZ.js";import{I as j}from"./image-anmIOmdY.js";import{D as T}from"./download-2PtOOvtw.js";function J(){const{toast:f}=_(),h=I(),[d,g]=V.useState("all"),[E,U]=V.useState(""),[B,O]=V.useState(null),{data:r=[],isLoading:S,error:k}=F({queryKey:["wave-payment-proofs",d],queryFn:async()=>{console.log("[WAVE ADMIN] Fetching proofs, filter:",d);let s=N.from("wave_payment_proofs").select("*").order("created_at",{ascending:!1});d!=="all"&&(s=s.eq("status",d));const{data:a,error:m}=await s;if(m)throw console.error("[WAVE ADMIN] Error fetching proofs:",m),m;console.log("[WAVE ADMIN] Proofs found:",a==null?void 0:a.length);const t=[...new Set((a==null?void 0:a.map(x=>x.user_id))||[])],{data:i,error:n}=await N.from("users").select("id, email, name").in("id",t);n&&console.error("[WAVE ADMIN] Error fetching users:",n),console.log("[WAVE ADMIN] Users found:",i==null?void 0:i.length);const v=a==null?void 0:a.map(x=>({...x,user:i==null?void 0:i.find(C=>C.id===x.user_id)}));return console.log("[WAVE ADMIN] Final proofs with users:",v==null?void 0:v.length),v},refetchInterval:1e4}),A=W({mutationFn:async({proofId:s})=>{var t;const a=await N.auth.getUser(),{error:m}=await N.from("wave_payment_proofs").update({status:"validated",validated_by:(t=a.data.user)==null?void 0:t.id,validated_at:new Date().toISOString()}).eq("id",s);if(m)throw m;return{success:!0}},onSuccess:()=>{h.invalidateQueries({queryKey:["wave-payment-proofs"]}),f({title:"Marqué comme validé",description:"N'oubliez pas de créditer l'utilisateur manuellement"})},onError:s=>{f({title:"Erreur",description:s.message,variant:"destructive"})}}),M=W({mutationFn:async({proofId:s,reason:a})=>{const{error:m}=await N.from("wave_payment_proofs").update({status:"rejected",rejection_reason:a}).eq("id",s);if(m)throw m},onSuccess:()=>{h.invalidateQueries({queryKey:["wave-payment-proofs"]}),O(null),f({title:"Paiement rejeté",description:"La preuve a été marquée comme rejetée"})}}),w=s=>{const a={pending:{label:"En attente",variant:"default",icon:p},validated:{label:"Validé",variant:"default",icon:b,className:"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-400"},rejected:{label:"Rejeté",variant:"destructive",icon:y}},m=a[s]||a.pending,t=m.icon;return e.jsxDEV(P,{variant:m.variant,className:m.className,children:[e.jsxDEV(t,{className:"w-3 h-3 mr-1"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:171,columnNumber:9},this),m.label]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:170,columnNumber:7},this)},u=r.filter(s=>{var a,m,t,i;if(E){const n=E.toLowerCase();return((m=(a=s.user)==null?void 0:a.email)==null?void 0:m.toLowerCase().includes(n))||((i=(t=s.user)==null?void 0:t.name)==null?void 0:i.toLowerCase().includes(n))||s.id.toLowerCase().includes(n)}return!0}),o={total:r.length,pending:r.filter(s=>s.status==="pending").length,validated:r.filter(s=>s.status==="validated").length,rejected:r.filter(s=>s.status==="rejected").length,totalAmount:r.filter(s=>s.status==="validated").reduce((s,a)=>s+a.amount,0)};return S?e.jsxDEV("div",{className:"flex items-center justify-center h-64",children:[e.jsxDEV(p,{className:"w-8 h-8 animate-spin"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:202,columnNumber:9},this),e.jsxDEV("p",{className:"ml-4",children:"Chargement des paiements Wave..."},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:203,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:201,columnNumber:7},this):k?e.jsxDEV("div",{className:"flex flex-col items-center justify-center h-64",children:[e.jsxDEV(AlertCircle,{className:"w-12 h-12 text-red-500 mb-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:211,columnNumber:9},this),e.jsxDEV("p",{className:"text-red-600",children:["Erreur: ",k.message]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:212,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:210,columnNumber:7},this):(console.log("[WAVE ADMIN RENDER] Proofs:",r==null?void 0:r.length,"Filtered:",u==null?void 0:u.length),e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-3xl font-bold flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center",children:e.jsxDEV(j,{className:"w-6 h-6 text-blue-600 dark:text-blue-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:225,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:224,columnNumber:11},this),"Paiements Wave"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:223,columnNumber:9},this),e.jsxDEV("p",{className:"text-muted-foreground mt-1",children:"Validez ou rejetez les paiements Wave avec preuve"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:229,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:222,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[e.jsxDEV(l,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Total"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:239,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold",children:o.total},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:240,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:238,columnNumber:13},this),e.jsxDEV(D,{className:"w-8 h-8 text-gray-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:242,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:237,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:236,columnNumber:9},this),e.jsxDEV(l,{className:"p-4 border-amber-200 dark:border-amber-800",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"En attente"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:249,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold text-amber-600",children:o.pending},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:250,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:248,columnNumber:13},this),e.jsxDEV(p,{className:"w-8 h-8 text-amber-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:252,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:247,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:246,columnNumber:9},this),e.jsxDEV(l,{className:"p-4 border-green-200 dark:border-green-800",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Validés"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:259,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold text-green-600",children:o.validated},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:260,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:258,columnNumber:13},this),e.jsxDEV(b,{className:"w-8 h-8 text-green-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:262,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:257,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:256,columnNumber:9},this),e.jsxDEV(l,{className:"p-4 border-red-200 dark:border-red-800",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Rejetés"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:269,columnNumber:15},this),e.jsxDEV("p",{className:"text-2xl font-bold text-red-600",children:o.rejected},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:270,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:268,columnNumber:13},this),e.jsxDEV(y,{className:"w-8 h-8 text-red-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:272,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:267,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:266,columnNumber:9},this),e.jsxDEV(l,{className:"p-4 bg-blue-50 dark:bg-blue-950/30",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Montant validé"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:279,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-blue-600",children:[o.totalAmount.toLocaleString()," F"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:280,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:278,columnNumber:13},this),e.jsxDEV(D,{className:"w-8 h-8 text-blue-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:284,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:277,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:276,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:235,columnNumber:7},this),e.jsxDEV(l,{className:"p-4",children:e.jsxDEV("div",{className:"flex flex-wrap gap-4",children:[e.jsxDEV("div",{className:"flex-1 min-w-[200px]",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(q,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:294,columnNumber:15},this),e.jsxDEV(R,{placeholder:"Rechercher par email, nom ou ID...",value:E,onChange:s=>U(s.target.value),className:"pl-10"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:295,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:293,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:292,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(c,{variant:"outline",onClick:()=>h.invalidateQueries({queryKey:["wave-payment-proofs"]}),size:"sm",disabled:S,children:[e.jsxDEV(L,{className:`w-4 h-4 mr-1 ${S?"animate-spin":""}`},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:311,columnNumber:15},this),"Actualiser"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:305,columnNumber:13},this),e.jsxDEV(c,{variant:d==="all"?"default":"outline",onClick:()=>g("all"),size:"sm",children:"Tous"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:314,columnNumber:13},this),e.jsxDEV(c,{variant:d==="pending"?"default":"outline",onClick:()=>g("pending"),size:"sm",children:[e.jsxDEV(p,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:326,columnNumber:15},this),"En attente"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:321,columnNumber:13},this),e.jsxDEV(c,{variant:d==="validated"?"default":"outline",onClick:()=>g("validated"),size:"sm",children:[e.jsxDEV(b,{className:"w-4 h-4 mr-1"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:334,columnNumber:15},this),"Validés"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:329,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:304,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:291,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:290,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4",children:u.length===0?e.jsxDEV(l,{className:"p-8 text-center",children:[e.jsxDEV(j,{className:"w-12 h-12 text-muted-foreground mx-auto mb-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:345,columnNumber:13},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Aucun paiement Wave trouvé"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:346,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:344,columnNumber:11},this):u.map(s=>{var a,m,t;return e.jsxDEV(l,{className:"p-6",children:e.jsxDEV("div",{className:"grid md:grid-cols-[200px_1fr_auto] gap-6",children:[e.jsxDEV("div",{children:s.proof_url?e.jsxDEV("div",{className:"relative group",children:[e.jsxDEV("img",{src:s.proof_url,alt:"Preuve de paiement",className:"w-full h-32 object-cover rounded-lg border-2 border-gray-200 dark:border-gray-700 cursor-pointer",onClick:()=>window.open(s.proof_url,"_blank")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:356,columnNumber:23},this),e.jsxDEV("div",{className:"absolute inset-0 bg-black/50 opacity-0 group-hover:opacity-100 transition-opacity rounded-lg flex items-center justify-center",children:e.jsxDEV(z,{className:"w-6 h-6 text-white"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:363,columnNumber:25},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:362,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:355,columnNumber:21},this):e.jsxDEV("div",{className:"w-full h-32 bg-gray-100 dark:bg-gray-800 rounded-lg flex items-center justify-center",children:e.jsxDEV(j,{className:"w-8 h-8 text-muted-foreground"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:368,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:367,columnNumber:21},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:353,columnNumber:17},this),e.jsxDEV("div",{className:"space-y-3",children:[e.jsxDEV("div",{className:"flex items-start justify-between",children:e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2 mb-1",children:[w(s.status),e.jsxDEV("span",{className:"text-xs text-muted-foreground",children:new Date(s.created_at).toLocaleDateString("fr-FR",{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:379,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:377,columnNumber:23},this),e.jsxDEV("p",{className:"font-mono text-xs text-muted-foreground",children:s.id},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:388,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:376,columnNumber:21},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:375,columnNumber:19},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(Q,{className:"w-4 h-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:394,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-medium text-sm",children:((a=s.user)==null?void 0:a.name)||"N/A"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:396,columnNumber:25},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:(m=s.user)==null?void 0:m.email},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:397,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:395,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:393,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(D,{className:"w-4 h-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:402,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-bold text-lg",children:[s.amount.toLocaleString()," FCFA"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:404,columnNumber:25},this),e.jsxDEV("p",{className:"text-xs text-muted-foreground",children:[s.activations," activations",((t=s.metadata)==null?void 0:t.bonus_activations)>0&&e.jsxDEV("span",{className:"text-green-600",children:[" (+",s.metadata.bonus_activations," bonus)"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:408,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:405,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:403,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:401,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:392,columnNumber:19},this),s.rejection_reason&&e.jsxDEV("div",{className:"text-xs text-red-600 bg-red-50 dark:bg-red-950/30 p-2 rounded",children:[e.jsxDEV("strong",{children:"Raison du rejet:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:417,columnNumber:23},this)," ",s.rejection_reason]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:416,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:374,columnNumber:17},this),e.jsxDEV("div",{className:"flex flex-col gap-2",children:[s.status==="pending"&&e.jsxDEV(e.Fragment,{children:[e.jsxDEV(c,{onClick:()=>{var n;const i=`Marquer comme VALIDÉ ?

Utilisateur: ${(n=s.user)==null?void 0:n.email}
Montant: ${s.amount} FCFA
Activations: ${s.activations}

⚠️ Vous devez créditer manuellement après !`;confirm(i)&&A.mutate({proofId:s.id})},disabled:A.isPending,className:"bg-green-600 hover:bg-green-700",children:[e.jsxDEV(b,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:436,columnNumber:25},this),"Marquer validé"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:426,columnNumber:23},this),e.jsxDEV(c,{variant:"destructive",onClick:()=>{const i=prompt("Raison du rejet :");i&&M.mutate({proofId:s.id,reason:i})},disabled:M.isPending,children:[e.jsxDEV(y,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:449,columnNumber:25},this),"Rejeter"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:439,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:425,columnNumber:21},this),s.status==="validated"&&e.jsxDEV(P,{variant:"outline",className:"bg-amber-50 text-amber-700 dark:bg-amber-950/30",children:"⚠️ Créditer utilisateur"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:456,columnNumber:21},this),e.jsxDEV(c,{variant:"outline",size:"sm",onClick:()=>window.open(s.proof_url,"_blank"),children:[e.jsxDEV(T,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:466,columnNumber:21},this),"Voir preuve"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:461,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:423,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:351,columnNumber:15},this)},s.id,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:350,columnNumber:13},this)})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:342,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminWavePayments.tsx",lineNumber:220,columnNumber:5},this))}export{J as default};
