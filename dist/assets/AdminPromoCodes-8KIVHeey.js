import{z as B,d as K,r as l,g as G,j as e,B as c,k as u,t as N,E as H,aL as R,L as C,q as Z,ag as J,G as W,h as X,I as t,o as Y,p as ee,i as se,T as me,s as d,y as p}from"./index-CJNHpMcx.js";import{u as k}from"./useMutation-DRoKD9_q.js";import{B as f}from"./badge-CTKbiBw2.js";import{S as M}from"./switch-DEkhqYPt.js";import{D as ie,a as re,b as ae,c as oe,d as te,e as ne}from"./dialog-CxB1sVOm.js";import{T as P}from"./ticket-C-auSAPI.js";import{P as le}from"./plus-BhivJFUF.js";import"./index-DzvZiFSC.js";import"./index-DdviMiCO.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const de=B("SquarePen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a2.121 2.121 0 1 1 3 3L12 15l-4 1 1-4Z",key:"1lpok0"}]]),U={code:"",description:"",discount_type:"percentage",discount_value:10,min_purchase:0,max_discount:"",start_date:"",end_date:"",max_uses:"",max_uses_per_user:1,is_active:!0};function Se(){const h=K(),[g,T]=l.useState(""),[q,x]=l.useState(!1),[n,S]=l.useState(null),[i,a]=l.useState(U),[b,A]=l.useState(!0),[j,O]=l.useState(!1);l.useEffect(()=>{(async()=>{const{data:m}=await d.from("system_settings").select("value").eq("key","promo_code_field_visible").single();m&&A(m.value==="true")})()},[]);const L=async s=>{O(!0);try{const{error:m}=await d.from("system_settings").upsert({key:"promo_code_field_visible",value:s?"true":"false",category:"promo",description:"Afficher le champ code promo sur la page TopUp",updated_at:new Date().toISOString()},{onConflict:"key"});if(m)throw m;A(s),p({title:s?"Champ code promo activé":"Champ code promo masqué",description:s?"Les utilisateurs peuvent maintenant entrer un code promo":"Le champ code promo est maintenant masqué sur TopUp"})}catch(m){p({title:"Erreur",description:m.message,variant:"destructive"})}finally{O(!1)}},{data:r,isLoading:F}=G({queryKey:["promo-codes"],queryFn:async()=>{const{data:s,error:m}=await d.from("promo_codes").select("*").order("created_at",{ascending:!1});if(m)throw m;return s}}),D=k({mutationFn:async s=>{const m={code:s.code.toUpperCase().trim(),description:s.description||null,discount_type:s.discount_type,discount_value:s.discount_value,min_purchase:s.min_purchase||0,max_discount:s.max_discount?parseFloat(s.max_discount):null,start_date:s.start_date||null,end_date:s.end_date||null,max_uses:s.max_uses?parseInt(s.max_uses):null,max_uses_per_user:s.max_uses_per_user||1,is_active:s.is_active,updated_at:new Date().toISOString()};if(n){const{error:o}=await d.from("promo_codes").update(m).eq("id",n.id);if(o)throw o}else{const{error:o}=await d.from("promo_codes").insert(m);if(o)throw o}},onSuccess:()=>{h.invalidateQueries({queryKey:["promo-codes"]}),p({title:n?"Code modifié":"Code créé",description:`Le code ${i.code} a été ${n?"modifié":"créé"} avec succès`}),x(!1),S(null),a(U)},onError:s=>{p({title:"Erreur",description:s.message,variant:"destructive"})}}),I=k({mutationFn:async s=>{const{error:m}=await d.from("promo_codes").delete().eq("id",s);if(m)throw m},onSuccess:()=>{h.invalidateQueries({queryKey:["promo-codes"]}),p({title:"Code supprimé"})}}),Q=k({mutationFn:async({id:s,is_active:m})=>{const{error:o}=await d.from("promo_codes").update({is_active:m,updated_at:new Date().toISOString()}).eq("id",s);if(o)throw o},onSuccess:()=>{h.invalidateQueries({queryKey:["promo-codes"]})}}),$=s=>{var m,o,y,w;S(s),a({code:s.code,description:s.description||"",discount_type:s.discount_type,discount_value:s.discount_value,min_purchase:s.min_purchase,max_discount:((m=s.max_discount)==null?void 0:m.toString())||"",start_date:((o=s.start_date)==null?void 0:o.split("T")[0])||"",end_date:((y=s.end_date)==null?void 0:y.split("T")[0])||"",max_uses:((w=s.max_uses)==null?void 0:w.toString())||"",max_uses_per_user:s.max_uses_per_user,is_active:s.is_active}),x(!0)},_=()=>{S(null),a(U),x(!0)},z=s=>{navigator.clipboard.writeText(s),p({title:"Code copié !"})},E=r==null?void 0:r.filter(s=>{var m;return s.code.toLowerCase().includes(g.toLowerCase())||((m=s.description)==null?void 0:m.toLowerCase().includes(g.toLowerCase()))}),v=s=>s.end_date?new Date(s.end_date)<new Date:!1,V=s=>s.max_uses?s.current_uses>=s.max_uses:!1;return e.jsxDEV("div",{className:"space-y-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsxDEV(P,{className:"h-6 w-6 text-purple-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:266,columnNumber:13},this),"Codes Promo"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:265,columnNumber:11},this),e.jsxDEV("p",{className:"text-muted-foreground",children:"Gérez les codes promotionnels pour les recharges"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:269,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:264,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:e.jsxDEV(c,{onClick:_,className:"bg-purple-600 hover:bg-purple-700",children:[e.jsxDEV(le,{className:"h-4 w-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:275,columnNumber:13},this),"Nouveau code"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:274,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:273,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:263,columnNumber:7},this),e.jsxDEV(u,{className:`border-2 transition-colors ${b?"border-green-300 bg-green-50":"border-gray-200 bg-gray-50"}`,children:e.jsxDEV(N,{className:"py-4",children:e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[b?e.jsxDEV("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsxDEV(H,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:288,columnNumber:19},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:287,columnNumber:17},this):e.jsxDEV("div",{className:"p-2 bg-gray-200 rounded-lg",children:e.jsxDEV(R,{className:"h-5 w-5 text-gray-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:292,columnNumber:19},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:291,columnNumber:17},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"font-semibold",children:b?"Champ code promo visible":"Champ code promo masqué"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:296,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:b?"Les utilisateurs peuvent entrer un code promo sur la page TopUp":"Le champ code promo est caché sur la page TopUp"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:299,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:295,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:285,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-3",children:[j&&e.jsxDEV(C,{className:"h-4 w-4 animate-spin"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:308,columnNumber:33},this),e.jsxDEV(M,{checked:b,onCheckedChange:L,disabled:j},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:309,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:307,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:284,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:283,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:282,columnNumber:7},this),e.jsxDEV("div",{className:"grid gap-4 md:grid-cols-4",children:[e.jsxDEV(u,{children:e.jsxDEV(N,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsxDEV(P,{className:"h-5 w-5 text-purple-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:325,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:324,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.length)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:328,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Codes total"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:329,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:327,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:323,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:322,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:321,columnNumber:9},this),e.jsxDEV(u,{children:e.jsxDEV(N,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsxDEV(Z,{className:"h-5 w-5 text-green-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:338,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:337,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.filter(s=>s.is_active&&!v(s)&&!V(s)).length)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:341,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Actifs"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:344,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:340,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:336,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:335,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:334,columnNumber:9},this),e.jsxDEV(u,{children:e.jsxDEV(N,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-blue-100 rounded-lg",children:e.jsxDEV(J,{className:"h-5 w-5 text-blue-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:353,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:352,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.reduce((s,m)=>s+m.current_uses,0))||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:356,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Utilisations"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:359,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:355,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:351,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:350,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:349,columnNumber:9},this),e.jsxDEV(u,{children:e.jsxDEV(N,{className:"pt-6",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"p-2 bg-pink-100 rounded-lg",children:e.jsxDEV(W,{className:"h-5 w-5 text-pink-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:368,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:367,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-2xl font-bold",children:(r==null?void 0:r.filter(s=>s.discount_type==="percentage").length)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:371,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-muted-foreground",children:"Codes %"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:374,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:370,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:366,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:365,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:364,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:320,columnNumber:7},this),e.jsxDEV("div",{className:"relative max-w-md",children:[e.jsxDEV(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:383,columnNumber:9},this),e.jsxDEV(t,{placeholder:"Rechercher un code...",value:g,onChange:s=>T(s.target.value),className:"pl-10"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:384,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:382,columnNumber:7},this),e.jsxDEV(u,{children:[e.jsxDEV(Y,{children:e.jsxDEV(ee,{children:"Tous les codes"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:395,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:394,columnNumber:9},this),e.jsxDEV(N,{children:F?e.jsxDEV("div",{className:"flex justify-center py-8",children:e.jsxDEV(C,{className:"h-6 w-6 animate-spin text-muted-foreground"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:400,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:399,columnNumber:13},this):E&&E.length>0?e.jsxDEV("div",{className:"space-y-3",children:E.map(s=>e.jsxDEV("div",{className:`flex items-center justify-between p-4 border rounded-lg transition-colors ${!s.is_active||v(s)||V(s)?"bg-gray-50 opacity-60":"hover:bg-muted/50"}`,children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"font-mono text-lg font-bold bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent cursor-pointer",onClick:()=>z(s.code),children:[s.code,e.jsxDEV(se,{className:"inline h-3 w-3 ml-1 text-gray-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:419,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:414,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(f,{variant:s.discount_type==="percentage"?"default":"secondary",children:s.discount_type==="percentage"?`+${s.discount_value}%`:`+${s.discount_value}Ⓐ`},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:423,columnNumber:23},this),v(s)&&e.jsxDEV(f,{variant:"destructive",children:"Expiré"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:431,columnNumber:25},this),V(s)&&e.jsxDEV(f,{variant:"destructive",children:"Épuisé"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:434,columnNumber:25},this),!s.is_active&&e.jsxDEV(f,{variant:"outline",children:"Désactivé"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:437,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:422,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:413,columnNumber:19},this),e.jsxDEV("div",{className:"flex items-center gap-6",children:[e.jsxDEV("div",{className:"text-right text-sm",children:[e.jsxDEV("div",{className:"text-muted-foreground",children:[s.current_uses,s.max_uses?`/${s.max_uses}`:""," utilisations"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:444,columnNumber:23},this),s.min_purchase>0&&e.jsxDEV("div",{className:"text-xs text-muted-foreground",children:["Min: ",s.min_purchase,"Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:448,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:443,columnNumber:21},this),e.jsxDEV(M,{checked:s.is_active,onCheckedChange:m=>Q.mutate({id:s.id,is_active:m})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:454,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(c,{variant:"ghost",size:"icon",onClick:()=>$(s),children:e.jsxDEV(de,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:467,columnNumber:25},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:462,columnNumber:23},this),e.jsxDEV(c,{variant:"ghost",size:"icon",className:"text-red-500 hover:text-red-700",onClick:()=>{confirm("Supprimer ce code promo ?")&&I.mutate(s.id)},children:e.jsxDEV(me,{className:"h-4 w-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:479,columnNumber:25},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:469,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:461,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:442,columnNumber:19},this)]},s.id,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:405,columnNumber:17},this))},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:403,columnNumber:13},this):e.jsxDEV("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsxDEV(P,{className:"h-12 w-12 mx-auto mb-4 opacity-20"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:488,columnNumber:15},this),e.jsxDEV("p",{children:"Aucun code promo"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:489,columnNumber:15},this),e.jsxDEV(c,{variant:"link",onClick:_,children:"Créer votre premier code"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:490,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:487,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:397,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:393,columnNumber:7},this),e.jsxDEV(ie,{open:q,onOpenChange:x,children:e.jsxDEV(re,{className:"max-w-lg",children:[e.jsxDEV(ae,{children:[e.jsxDEV(oe,{children:n?"Modifier le code":"Nouveau code promo"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:502,columnNumber:13},this),e.jsxDEV(te,{children:n?"Modifiez les paramètres du code promo":"Créez un nouveau code promotionnel pour vos utilisateurs"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:505,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:501,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-4 py-4",children:[e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Code *"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:516,columnNumber:17},this),e.jsxDEV(t,{value:i.code,onChange:s=>a({...i,code:s.target.value.toUpperCase()}),placeholder:"SUMMER20",className:"font-mono"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:517,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:515,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Type"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:525,columnNumber:17},this),e.jsxDEV("select",{value:i.discount_type,onChange:s=>a({...i,discount_type:s.target.value}),className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",children:[e.jsxDEV("option",{value:"percentage",children:"Pourcentage (%)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:533,columnNumber:19},this),e.jsxDEV("option",{value:"fixed",children:"Fixe (Ⓐ)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:534,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:526,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:524,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:514,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Description"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:540,columnNumber:15},this),e.jsxDEV(t,{value:i.description,onChange:s=>a({...i,description:s.target.value}),placeholder:"Offre de bienvenue"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:541,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:539,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:["Valeur ",i.discount_type==="percentage"?"(%)":"(Ⓐ)"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:550,columnNumber:17},this),e.jsxDEV(t,{type:"number",value:i.discount_value,onChange:s=>a({...i,discount_value:parseFloat(s.target.value)||0}),placeholder:"10"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:553,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:549,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Achat minimum (Ⓐ)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:561,columnNumber:17},this),e.jsxDEV(t,{type:"number",value:i.min_purchase,onChange:s=>a({...i,min_purchase:parseFloat(s.target.value)||0}),placeholder:"0"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:562,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:560,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:548,columnNumber:13},this),i.discount_type==="percentage"&&e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Bonus maximum (Ⓐ) - optionnel"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:573,columnNumber:17},this),e.jsxDEV(t,{type:"number",value:i.max_discount,onChange:s=>a({...i,max_discount:s.target.value}),placeholder:"Illimité"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:574,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:572,columnNumber:15},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Date début"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:585,columnNumber:17},this),e.jsxDEV(t,{type:"date",value:i.start_date,onChange:s=>a({...i,start_date:s.target.value})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:586,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:584,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Date fin"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:593,columnNumber:17},this),e.jsxDEV(t,{type:"date",value:i.end_date,onChange:s=>a({...i,end_date:s.target.value})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:594,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:592,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:583,columnNumber:13},this),e.jsxDEV("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Utilisations max"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:604,columnNumber:17},this),e.jsxDEV(t,{type:"number",value:i.max_uses,onChange:s=>a({...i,max_uses:s.target.value}),placeholder:"Illimité"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:605,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:603,columnNumber:15},this),e.jsxDEV("div",{children:[e.jsxDEV("label",{className:"text-sm font-medium mb-2 block",children:"Max par utilisateur"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:613,columnNumber:17},this),e.jsxDEV(t,{type:"number",value:i.max_uses_per_user,onChange:s=>a({...i,max_uses_per_user:parseInt(s.target.value)||1}),placeholder:"1"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:614,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:612,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:602,columnNumber:13},this),e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(M,{checked:i.is_active,onCheckedChange:s=>a({...i,is_active:s})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:624,columnNumber:15},this),e.jsxDEV("label",{className:"text-sm",children:"Actif immédiatement"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:628,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:623,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:513,columnNumber:11},this),e.jsxDEV(ne,{children:[e.jsxDEV(c,{variant:"outline",onClick:()=>x(!1),children:"Annuler"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:633,columnNumber:13},this),e.jsxDEV(c,{onClick:()=>D.mutate(i),disabled:!i.code||D.isPending,className:"bg-purple-600 hover:bg-purple-700",children:[D.isPending?e.jsxDEV(C,{className:"h-4 w-4 animate-spin mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:642,columnNumber:17},this):null,n?"Enregistrer":"Créer"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:636,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:632,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:500,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:499,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminPromoCodes.tsx",lineNumber:261,columnNumber:5},this)}export{Se as default};
