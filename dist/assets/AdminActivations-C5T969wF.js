import{x as fe,a as be,d as ve,e as he,r as h,b1 as ge,g as Q,j as e,B as f,R as W,p as o,aL as k,C as M,F as P,aP as Se,h as Ae,I as H,ac as De,a7 as Ee,aN as Ve,aI as je,m as X,ae as ke,af as Me,A as $,s as I,M as Ue}from"./index-Bvkzdf-K.js";import{u as Oe}from"./useMutation-SX1VSpMj.js";import{B as g}from"./badge-LtVdvlU3.js";import{b as ye,g as we,a as _e,c as Y,d as Ce}from"./logo-service-CQ-C7wtO.js";import{D as Re,a as Fe,b as ze,c as Te,d as Le,e as Pe}from"./dialog-Cg1gV7jB.js";import{D as $e}from"./download-Bm27SNRE.js";import{P as Ie}from"./phone-CpI0CFAq.js";import{R as w}from"./rotate-ccw-qqttI37J.js";import{T as qe}from"./timer-BfShULww.js";/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Be=fe("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),J=(S,E)=>{const d=S.target;if(d.dataset.fallbackLoaded==="true"){d.style.display="none";const u=d.nextElementSibling;u&&(u.style.display="flex");return}if(E)d.dataset.fallbackLoaded="true",d.src=Ce(E);else{d.style.display="none";const u=d.nextElementSibling;u&&(u.style.display="flex")}};function es(){const{toast:S}=be(),E=ve(),d=he(),[u,Z]=h.useState(""),[b,ee]=h.useState("all"),[_,se]=h.useState(""),[V,ie]=h.useState("all"),[C,te]=h.useState(new Set),[ae,U]=h.useState(!1),[N,q]=h.useState(null),[p,j]=h.useState(1),R=50;ge();const{data:me=[],isLoading:ne,refetch:re,error:B}=Q({queryKey:["admin-activations",b],queryFn:async()=>{let s=I.from("activations").select(`
          *,
          user:users(id, email, balance)
        `).order("created_at",{ascending:!1}).limit(500);b!=="all"&&(s=s.eq("status",b));const{data:i,error:t}=await s;if(t)throw console.error("[AdminActivations] Error:",t),t;return i||[]},refetchInterval:15e3}),{data:m}=Q({queryKey:["admin-activations-stats"],queryFn:async()=>{const{data:s,error:i}=await I.from("activations").select("status, price, charged, frozen_amount");if(i)return console.error("[AdminActivations] Stats error:",i),{total:0,completed:0,pending:0,cancelled:0,refunded:0,revenue:0,successRate:0,totalFrozen:0};const t=s.length,c=s.filter(n=>n.status==="received"||n.status==="completed").length,r=s.filter(n=>n.status==="pending"||n.status==="waiting").length,l=s.filter(n=>n.status==="cancelled"||n.status==="timeout").length,a=s.filter(n=>n.status==="refunded").length,x=s.filter(n=>n.charged===!0).reduce((n,D)=>n+(parseFloat(D.price)||0),0),O=s.reduce((n,D)=>n+(parseFloat(D.frozen_amount)||0),0),y=t>0?Math.round(c/t*100):0;return{total:t,completed:c,pending:r,cancelled:l,refunded:a,revenue:x,successRate:y,totalFrozen:O}},refetchInterval:3e4}),F=Oe({mutationFn:async s=>{console.log("[AdminActivations] Refund starting for:",s.id);const{data:i,error:t}=await I.rpc("atomic_refund",{p_user_id:s.user_id,p_activation_id:s.id,p_rental_id:null,p_transaction_id:null,p_reason:`Admin refund - ${s.service_code} (${s.phone})`});if(t)throw console.error("[AdminActivations] atomic_refund failed:",t),new Error(`Refund failed: ${t.message}`);return console.log("[AdminActivations] atomic_refund SUCCESS:",i),i},onSuccess:s=>{E.invalidateQueries({queryKey:["admin-activations"]}),E.invalidateQueries({queryKey:["admin-activations-stats"]}),S({title:"✅ Remboursement effectué",description:`${s.amount_refunded} Ⓐ dégelés. Frozen: ${s.frozen_before} → ${s.frozen_after} Ⓐ`}),U(!1),q(null)},onError:s=>{S({title:"Erreur",description:s.message,variant:"destructive"})}}),A=me.filter(s=>{var a,x,O,y,n,D,K;const i=u.toLowerCase(),t=!u||((a=s.phone)==null?void 0:a.toLowerCase().includes(i))||((O=(x=s.user)==null?void 0:x.email)==null?void 0:O.toLowerCase().includes(i))||((y=s.service_code)==null?void 0:y.toLowerCase().includes(i))||((n=s.country_code)==null?void 0:n.toLowerCase().includes(i))||((D=s.sms_code)==null?void 0:D.toLowerCase().includes(i)),c=!_||((K=s.service_code)==null?void 0:K.toLowerCase().includes(_.toLowerCase()));let r=!0;b==="charged"?r=s.charged===!0:b==="frozen"?r=(s.frozen_amount||0)>0:b!=="all"&&(r=s.status===b);let l=!0;if(V!=="all"){const z=new Date(s.created_at),T=new Date;if(V==="today")l=z.toDateString()===T.toDateString();else if(V==="week"){const L=new Date(T.getTime()-6048e5);l=z>=L}else if(V==="month"){const L=new Date(T.getTime()-2592e6);l=z>=L}}return t&&c&&l&&r}),v=Math.ceil(A.length/R),le=A.slice((p-1)*R,p*R),ce=s=>s.expires_at?new Date(s.expires_at)<new Date:!1,oe=s=>{if(!s.expires_at)return null;const i=new Date(s.expires_at),t=new Date;if(i<t)return{expired:!0,text:"Expiré"};const c=i.getTime()-t.getTime(),r=Math.floor(c/6e4);return r<60?{expired:!1,text:`${r}m restantes`}:{expired:!1,text:`${Math.floor(r/60)}h restantes`}},de=()=>{const s=["ID","User Email","Service","Country","Phone","Price","Status","Charged","SMS Code","Created","Expires"],i=A.map(a=>{var x;return[a.id,((x=a.user)==null?void 0:x.email)||"N/A",a.service_code,a.country_code,a.phone,a.price,a.status,a.charged?"Yes":"No",a.sms_code||"",new Date(a.created_at).toLocaleString(),a.expires_at?new Date(a.expires_at).toLocaleString():""]}),t=[s.join(","),...i.map(a=>a.map(x=>`"${x}"`).join(","))].join(`
`),c=new Blob([t],{type:"text/csv"}),r=URL.createObjectURL(c),l=document.createElement("a");l.href=r,l.download=`activations-${new Date().toISOString().split("T")[0]}.csv`,l.click(),S({title:"✅ Export réussi",description:`${A.length} activations exportées`})},ue=s=>{const t={pending:{color:"bg-yellow-100 text-yellow-800",icon:M,label:"En attente"},waiting:{color:"bg-blue-100 text-blue-800",icon:Ue,label:"Attente SMS"},received:{color:"bg-green-100 text-green-800",icon:k,label:"SMS Reçu"},completed:{color:"bg-green-100 text-green-800",icon:k,label:"Complété"},cancelled:{color:"bg-red-100 text-red-800",icon:P,label:"Annulé"},timeout:{color:"bg-gray-100 text-gray-800",icon:$,label:"Expiré"}}[s]||{color:"bg-gray-100 text-gray-800",icon:M,label:s},c=t.icon;return e.jsxDEV(g,{className:`${t.color} flex items-center gap-1`,children:[e.jsxDEV(c,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:331,columnNumber:9},this),t.label]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:330,columnNumber:7},this)},Ne=s=>{const i=s.frozen_amount||0;return i>0&&["pending","waiting"].includes(s.status)?e.jsxDEV(g,{className:"bg-orange-100 text-orange-800 flex items-center gap-1 w-fit",children:[e.jsxDEV(M,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:346,columnNumber:11},this),"Gelé (",i," Ⓐ)"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:345,columnNumber:9},this):s.status==="refunded"?e.jsxDEV(g,{className:"bg-purple-100 text-purple-800 flex items-center gap-1 w-fit",children:[e.jsxDEV(w,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:356,columnNumber:11},this),"Remboursé"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:355,columnNumber:9},this):s.charged===!0||["received","completed"].includes(s.status)?e.jsxDEV(g,{className:"bg-green-100 text-green-800 flex items-center gap-1 w-fit",children:[e.jsxDEV(k,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:366,columnNumber:11},this),"Facturé"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:365,columnNumber:9},this):i>0&&["cancelled","timeout","no_numbers","expired"].includes(s.status)?e.jsxDEV(g,{className:"bg-red-100 text-red-800 flex items-center gap-1 w-fit",children:[e.jsxDEV($,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:376,columnNumber:11},this),"Bloqué (",i," Ⓐ)"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:375,columnNumber:9},this):["cancelled","timeout","no_numbers","expired"].includes(s.status)&&i===0?e.jsxDEV(g,{className:"bg-purple-100 text-purple-800 flex items-center gap-1 w-fit",children:[e.jsxDEV(w,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:387,columnNumber:11},this),"Remboursé"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:386,columnNumber:9},this):e.jsxDEV(g,{className:"bg-gray-100 text-gray-600 flex items-center gap-1 w-fit",children:[e.jsxDEV(P,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:396,columnNumber:9},this),"Non facturé"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:395,columnNumber:7},this)},pe=s=>{const i=s.frozen_amount||0;return s.status==="refunded"||s.charged===!0||["received","completed"].includes(s.status)?!1:i>0?!0:["cancelled","timeout","expired","no_numbers"].includes(s.status)&&i===0?!1:!!["pending","waiting"].includes(s.status)},xe=s=>{const i=new Set(C);i.has(s)?i.delete(s):i.add(s),te(i)},G=s=>{navigator.clipboard.writeText(s),S({title:"Copié !",description:s})};return e.jsxDEV("div",{className:"space-y-6",children:[B&&e.jsxDEV("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded",children:[e.jsxDEV("strong",{children:"Erreur:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:450,columnNumber:11},this)," ",B.message||"Impossible de charger les données"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:449,columnNumber:9},this),e.jsxDEV("div",{className:"flex items-center justify-between",children:[e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:"Activations & Achats"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:458,columnNumber:13},this),e.jsxDEV(g,{className:"bg-green-100 text-green-700 flex items-center gap-1",children:[e.jsxDEV(Be,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:460,columnNumber:15},this),"Temps réel"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:459,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:457,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-500 mt-1",children:"Mises à jour instantanées via WebSocket"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:464,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:456,columnNumber:9},this),e.jsxDEV("div",{className:"flex gap-2",children:[e.jsxDEV(f,{variant:"outline",onClick:()=>re(),children:[e.jsxDEV(W,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:468,columnNumber:13},this),"Actualiser"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:467,columnNumber:11},this),e.jsxDEV(f,{variant:"outline",onClick:de,children:[e.jsxDEV($e,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:472,columnNumber:13},this),"Exporter CSV"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:471,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:466,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:455,columnNumber:7},this),e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 lg:grid-cols-7 gap-4",children:[e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(Ie,{className:"w-5 h-5 text-blue-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:483,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:482,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Total"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:486,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold",children:(m==null?void 0:m.total)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:487,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:485,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:481,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:480,columnNumber:9},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-green-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(k,{className:"w-5 h-5 text-green-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:494,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:493,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Complétés"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:497,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-green-600",children:(m==null?void 0:m.completed)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:498,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:496,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:492,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:491,columnNumber:9},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-yellow-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(M,{className:"w-5 h-5 text-yellow-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:505,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:504,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"En attente"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:508,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-yellow-600",children:(m==null?void 0:m.pending)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:509,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:507,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:503,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:502,columnNumber:9},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-red-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(P,{className:"w-5 h-5 text-red-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:516,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:515,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Annulés"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:519,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-red-600",children:(m==null?void 0:m.cancelled)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:520,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:518,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:514,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:513,columnNumber:9},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-emerald-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(Se,{className:"w-5 h-5 text-emerald-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:527,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:526,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Revenus"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:530,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-emerald-600",children:[Math.floor((m==null?void 0:m.revenue)||0)," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:531,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:529,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:525,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:524,columnNumber:9},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-indigo-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(k,{className:"w-5 h-5 text-indigo-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:538,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:537,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Taux succès"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:541,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-indigo-600",children:[(m==null?void 0:m.successRate)||0,"%"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:542,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:540,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:536,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:535,columnNumber:9},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-purple-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(w,{className:"w-5 h-5 text-purple-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:549,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:548,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Remboursés"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:552,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-purple-600",children:(m==null?void 0:m.refunded)||0},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:553,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:551,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:547,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:546,columnNumber:9},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-10 h-10 bg-orange-100 rounded-lg flex items-center justify-center",children:e.jsxDEV(M,{className:"w-5 h-5 text-orange-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:560,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:559,columnNumber:13},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm text-gray-500",children:"Gelé (Total)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:563,columnNumber:15},this),e.jsxDEV("p",{className:"text-xl font-bold text-orange-600",children:[Math.floor((m==null?void 0:m.totalFrozen)||0)," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:564,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:562,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:558,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:557,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:479,columnNumber:7},this),e.jsxDEV(o,{className:"p-4",children:e.jsxDEV("div",{className:"flex flex-wrap gap-4 items-center",children:[e.jsxDEV("div",{className:"flex-1 min-w-[200px]",children:e.jsxDEV("div",{className:"relative",children:[e.jsxDEV(Ae,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-gray-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:575,columnNumber:15},this),e.jsxDEV(H,{placeholder:"Rechercher (email, téléphone, service, code SMS...)",value:u,onChange:s=>{Z(s.target.value),j(1)},className:"pl-10"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:576,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:574,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:573,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-2 flex-wrap",children:[e.jsxDEV("select",{value:V,onChange:s=>{ie(s.target.value),j(1)},className:"px-3 py-2 border rounded-lg text-sm",children:[e.jsxDEV("option",{value:"all",children:"Toutes les dates"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:590,columnNumber:15},this),e.jsxDEV("option",{value:"today",children:"Aujourd'hui"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:591,columnNumber:15},this),e.jsxDEV("option",{value:"week",children:"Cette semaine"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:592,columnNumber:15},this),e.jsxDEV("option",{value:"month",children:"Ce mois"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:593,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:585,columnNumber:13},this),e.jsxDEV("select",{value:b,onChange:s=>ee(s.target.value),className:"px-3 py-2 border rounded-lg text-sm",children:[e.jsxDEV("option",{value:"all",children:"Tous les statuts"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:600,columnNumber:15},this),e.jsxDEV("option",{value:"pending",children:"En attente"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:601,columnNumber:15},this),e.jsxDEV("option",{value:"waiting",children:"Attente SMS"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:602,columnNumber:15},this),e.jsxDEV("option",{value:"received",children:"SMS Reçu"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:603,columnNumber:15},this),e.jsxDEV("option",{value:"completed",children:"Complété"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:604,columnNumber:15},this),e.jsxDEV("option",{value:"charged",children:"Facturés (charged=true)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:605,columnNumber:15},this),e.jsxDEV("option",{value:"frozen",children:"Gelés (frozen>0)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:606,columnNumber:15},this),e.jsxDEV("option",{value:"cancelled",children:"Annulé"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:607,columnNumber:15},this),e.jsxDEV("option",{value:"timeout",children:"Expiré"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:608,columnNumber:15},this),e.jsxDEV("option",{value:"refunded",children:"Remboursé"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:609,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:595,columnNumber:13},this),e.jsxDEV(H,{placeholder:"Filtrer service...",value:_,onChange:s=>se(s.target.value),className:"w-40"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:611,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:584,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:572,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:571,columnNumber:7},this),e.jsxDEV(o,{children:[e.jsxDEV("div",{className:"overflow-x-auto",children:e.jsxDEV("table",{className:"w-full",children:[e.jsxDEV("thead",{className:"bg-gray-50 border-b",children:e.jsxDEV("tr",{children:[e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Utilisateur"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:627,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Service / Pays"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:628,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Numéro"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:629,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Coût"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:630,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Statut"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:631,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Paiement"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:632,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"SMS"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:633,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Date"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:634,columnNumber:17},this),e.jsxDEV("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase",children:"Actions"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:635,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:626,columnNumber:15},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:625,columnNumber:13},this),e.jsxDEV("tbody",{className:"divide-y divide-gray-200",children:ne?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:[e.jsxDEV(W,{className:"w-6 h-6 animate-spin mx-auto mb-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:642,columnNumber:21},this),"Chargement..."]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:641,columnNumber:19},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:640,columnNumber:17},this):A.length===0?e.jsxDEV("tr",{children:e.jsxDEV("td",{colSpan:9,className:"px-4 py-8 text-center text-gray-500",children:"Aucune activation trouvée"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:648,columnNumber:19},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:647,columnNumber:17},this):le.map(s=>{var c,r,l;const i=oe(s),t=ye(s.country_code);return e.jsxDEV(De.Fragment,{children:[e.jsxDEV("tr",{className:`hover:bg-gray-50 ${ce(s)&&s.status==="pending"?"bg-red-50":""}`,children:[e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("div",{className:"w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center",children:e.jsxDEV(Ee,{className:"w-4 h-4 text-blue-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:662,columnNumber:31},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:661,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("button",{onClick:()=>{var a;return d(`/admin/users?search=${(a=s.user)==null?void 0:a.email}`)},className:"text-sm font-medium text-blue-600 hover:underline flex items-center gap-1",children:[((c=s.user)==null?void 0:c.email)||"N/A",e.jsxDEV(Ve,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:670,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:665,columnNumber:31},this),e.jsxDEV("p",{className:"text-xs text-gray-500",children:[Math.floor(((r=s.user)==null?void 0:r.balance)||0)," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:672,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:664,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:660,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:659,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"relative flex-shrink-0",children:[e.jsxDEV("div",{className:"w-10 h-10 border rounded-lg bg-gray-50 flex items-center justify-center",children:[e.jsxDEV("img",{src:we(s.service_code),alt:s.service_code,className:"w-6 h-6 object-contain",onError:a=>J(a,s.service_code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:680,columnNumber:33},this),e.jsxDEV("span",{className:"text-sm hidden items-center justify-center",children:_e(s.service_code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:686,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:679,columnNumber:31},this),e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 rounded-full border-2 border-white overflow-hidden bg-white shadow-sm flex items-center justify-center",children:t?e.jsxDEV(e.Fragment,{children:[e.jsxDEV("img",{src:t,alt:s.country_code,className:"w-full h-full object-cover",onError:a=>J(a)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:691,columnNumber:37},this),e.jsxDEV("span",{className:"text-[10px] hidden items-center justify-center",children:Y(s.country_code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:697,columnNumber:37},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:690,columnNumber:35},this):e.jsxDEV("span",{className:"text-[10px] inline-flex items-center justify-center",children:Y(s.country_code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:700,columnNumber:35},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:688,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:678,columnNumber:29},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-sm font-medium text-gray-900",children:s.service_code},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:705,columnNumber:31},this),e.jsxDEV("p",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsxDEV(je,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:707,columnNumber:33},this),s.country_code]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:706,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:704,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:677,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:676,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("code",{className:"text-sm bg-gray-100 px-2 py-1 rounded",children:s.phone},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:715,columnNumber:29},this),e.jsxDEV("button",{onClick:()=>G(s.phone),className:"text-gray-400 hover:text-gray-600",children:e.jsxDEV(X,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:717,columnNumber:31},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:716,columnNumber:29},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:714,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:713,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("span",{className:"text-sm font-medium",children:[s.price," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:722,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:721,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:ue(s.status)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:724,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:Ne(s)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:727,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:s.sms_code?e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("code",{className:"text-sm bg-green-100 text-green-800 px-2 py-1 rounded font-bold",children:s.sms_code},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:733,columnNumber:31},this),e.jsxDEV("button",{onClick:()=>G(s.sms_code),className:"text-gray-400 hover:text-gray-600",children:e.jsxDEV(X,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:737,columnNumber:33},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:736,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:732,columnNumber:29},this):e.jsxDEV("span",{className:"text-xs text-gray-400",children:"—"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:741,columnNumber:29},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:730,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"text-xs text-gray-500",children:[e.jsxDEV("p",{children:new Date(s.created_at).toLocaleDateString("fr-FR")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:746,columnNumber:29},this),e.jsxDEV("p",{children:new Date(s.created_at).toLocaleTimeString("fr-FR")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:747,columnNumber:29},this),i&&e.jsxDEV("p",{className:`mt-1 flex items-center gap-1 ${i.expired?"text-red-500":"text-orange-500"}`,children:[e.jsxDEV(qe,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:750,columnNumber:33},this),i.text]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:749,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:745,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:744,columnNumber:25},this),e.jsxDEV("td",{className:"px-4 py-3",children:e.jsxDEV("div",{className:"flex items-center gap-1",children:[e.jsxDEV(f,{variant:"ghost",size:"sm",onClick:()=>xe(s.id),children:C.has(s.id)?e.jsxDEV(ke,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:764,columnNumber:33},this):e.jsxDEV(Me,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:766,columnNumber:33},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:758,columnNumber:29},this),pe(s)&&e.jsxDEV(f,{variant:"ghost",size:"sm",className:"text-red-600 hover:text-red-700 hover:bg-red-50",onClick:()=>{q(s),U(!0)},title:`Rembourser ${s.frozen_amount||s.price} Ⓐ`,children:e.jsxDEV(w,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:781,columnNumber:33},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:771,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:757,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:756,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:658,columnNumber:23},this),C.has(s.id)&&e.jsxDEV("tr",{className:"bg-gray-50",children:e.jsxDEV("td",{colSpan:9,className:"px-4 py-4",children:e.jsxDEV("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-500 text-xs mb-1",children:"ID Activation"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:793,columnNumber:33},this),e.jsxDEV("code",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:s.id},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:794,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:792,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-500 text-xs mb-1",children:"Order ID (Provider)"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:797,columnNumber:33},this),e.jsxDEV("code",{className:"text-xs bg-gray-200 px-2 py-1 rounded",children:s.order_id},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:798,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:796,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-500 text-xs mb-1",children:"Opérateur"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:801,columnNumber:33},this),e.jsxDEV("p",{className:"font-medium",children:s.operator||"N/A"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:802,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:800,columnNumber:31},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-gray-500 text-xs mb-1",children:"Expiration"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:805,columnNumber:33},this),e.jsxDEV("p",{className:"font-medium",children:s.expires_at?new Date(s.expires_at).toLocaleString("fr-FR"):"N/A"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:806,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:804,columnNumber:31},this),s.sms_text&&e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("p",{className:"text-gray-500 text-xs mb-1",children:"SMS Complet"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:810,columnNumber:35},this),e.jsxDEV("div",{className:"bg-white border rounded-lg p-3 text-sm",children:s.sms_text},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:811,columnNumber:35},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:809,columnNumber:33},this),e.jsxDEV("div",{className:"col-span-4",children:[e.jsxDEV("p",{className:"text-gray-500 text-xs mb-1",children:"Solde utilisateur actuel"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:817,columnNumber:33},this),e.jsxDEV("p",{className:"font-medium",children:[Math.floor(((l=s.user)==null?void 0:l.balance)||0)," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:818,columnNumber:33},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:816,columnNumber:31},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:791,columnNumber:29},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:790,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:789,columnNumber:25},this)]},s.id,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:657,columnNumber:21},this)})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:638,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:624,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:623,columnNumber:9},this),e.jsxDEV("div",{className:"px-4 py-3 border-t bg-gray-50 flex items-center justify-between",children:[e.jsxDEV("div",{className:"text-sm text-gray-500",children:[A.length," activation(s) • Page ",p,"/",v||1]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:834,columnNumber:11},this),v>1&&e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV(f,{variant:"outline",size:"sm",onClick:()=>j(s=>Math.max(1,s-1)),disabled:p===1,children:"Précédent"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:839,columnNumber:15},this),e.jsxDEV("div",{className:"flex items-center gap-1",children:Array.from({length:Math.min(5,v)},(s,i)=>{let t;return v<=5||p<=3?t=i+1:p>=v-2?t=v-4+i:t=p-2+i,e.jsxDEV(f,{variant:p===t?"default":"outline",size:"sm",onClick:()=>j(t),className:"w-8 h-8 p-0",children:t},t,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:860,columnNumber:21},this)})},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:847,columnNumber:15},this),e.jsxDEV(f,{variant:"outline",size:"sm",onClick:()=>j(s=>Math.min(v,s+1)),disabled:p===v,children:"Suivant"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:872,columnNumber:15},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:838,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:833,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:622,columnNumber:7},this),e.jsxDEV(Re,{open:ae,onOpenChange:U,children:e.jsxDEV(Fe,{children:[e.jsxDEV(ze,{children:[e.jsxDEV(Te,{children:"Confirmer le remboursement"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:889,columnNumber:13},this),e.jsxDEV(Le,{children:"Voulez-vous rembourser cette activation ?"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:890,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:888,columnNumber:11},this),N&&(()=>{var t;const s=N.frozen_amount||0,i=s>0?s:N.price;return e.jsxDEV("div",{className:"space-y-4 py-4",children:[e.jsxDEV("div",{className:"bg-gray-50 p-4 rounded-lg space-y-2",children:[e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Utilisateur:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:901,columnNumber:21},this),e.jsxDEV("span",{className:"font-medium",children:(t=N.user)==null?void 0:t.email},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:902,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:900,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Service:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:905,columnNumber:21},this),e.jsxDEV("span",{className:"font-medium",children:N.service_code},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:906,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:904,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Numéro:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:909,columnNumber:21},this),e.jsxDEV("span",{className:"font-medium",children:N.phone},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:910,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:908,columnNumber:19},this),e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Prix original:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:913,columnNumber:21},this),e.jsxDEV("span",{className:"font-medium",children:[N.price," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:914,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:912,columnNumber:19},this),s>0&&e.jsxDEV("div",{className:"flex justify-between",children:[e.jsxDEV("span",{className:"text-gray-500",children:"Fonds gelés:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:918,columnNumber:23},this),e.jsxDEV("span",{className:"font-medium text-orange-600",children:[s," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:919,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:917,columnNumber:21},this),e.jsxDEV("div",{className:"flex justify-between border-t pt-2 mt-2",children:[e.jsxDEV("span",{className:"text-gray-700 font-medium",children:"Montant à rembourser:"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:923,columnNumber:21},this),e.jsxDEV("span",{className:"font-bold text-green-600",children:[i," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:924,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:922,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:899,columnNumber:17},this),e.jsxDEV("p",{className:"text-sm text-amber-600 flex items-center gap-2",children:[e.jsxDEV($,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:928,columnNumber:19},this),s>0?`Cette action va dégeler et restituer ${i} Ⓐ au compte de l'utilisateur.`:`Cette action va créditer ${i} Ⓐ sur le compte de l'utilisateur.`]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:927,columnNumber:17},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:898,columnNumber:15},this)})(),e.jsxDEV(Pe,{children:[e.jsxDEV(f,{variant:"outline",onClick:()=>U(!1),children:"Annuler"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:938,columnNumber:13},this),e.jsxDEV(f,{className:"bg-green-600 hover:bg-green-700",onClick:()=>N&&F.mutate(N),disabled:F.isPending,children:F.isPending?"Remboursement...":"Confirmer le remboursement"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:941,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:937,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:887,columnNumber:9},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:886,columnNumber:7},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/admin/AdminActivations.tsx",lineNumber:446,columnNumber:5},this)}export{es as default};
