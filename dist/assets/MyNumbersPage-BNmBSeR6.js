import{u as P,b as O,a as U,g as b,j as e,B as t,R as w,L as g,n as _,o as C,p as q,m as c,M as A,C as p,q as x,t as T,s as f}from"./index-Bvkzdf-K.js";import{B as n}from"./badge-LtVdvlU3.js";import{g as h,c as S}from"./logo-service-CQ-C7wtO.js";function $(){const{t:i}=P(),{user:a}=O(),{toast:o}=U(),{data:E=[],isLoading:M,refetch:v}=b({queryKey:["my-numbers-activations",a==null?void 0:a.id],queryFn:async()=>{if(!(a!=null&&a.id))return[];const{data:s,error:r}=await f.from("activations").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});if(r)throw r;return(s||[]).map(l=>({...l,type:"activation"}))},enabled:!!a}),{data:D=[],isLoading:V,refetch:y}=b({queryKey:["my-numbers-rentals",a==null?void 0:a.id],queryFn:async()=>{if(!(a!=null&&a.id))return[];const{data:s,error:r}=await f.from("rentals").select("*").eq("user_id",a.id).order("created_at",{ascending:!1});if(r)throw r;return(s||[]).map(l=>({...l,type:"rental"}))},enabled:!!a}),N=M||V,u=[...E,...D].filter(s=>s.type==="activation"?["pending","waiting","received"].includes(s.status):s.status==="active").sort((s,r)=>new Date(r.created_at).getTime()-new Date(s.created_at).getTime()),j=u.length>0,m=s=>{navigator.clipboard.writeText(s),o({title:i("common.copied"),description:s})},k=()=>{v(),y(),o({title:i("common.refreshed")})},d=s=>{switch(s){case"active":case"received":return e.jsxDEV(n,{className:"bg-green-500 hover:bg-green-600",children:"Actif"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:118,columnNumber:16},this);case"pending":case"waiting":return e.jsxDEV(n,{className:"bg-amber-500 hover:bg-amber-600 animate-pulse",children:"En attente"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:121,columnNumber:16},this);default:return e.jsxDEV(n,{variant:"secondary",children:s},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:123,columnNumber:16},this)}};return e.jsxDEV("div",{className:"container mx-auto max-w-4xl pb-24 px-4 pt-6",children:[e.jsxDEV("div",{className:"flex items-center justify-between mb-6",children:[e.jsxDEV("div",{children:[e.jsxDEV("h1",{className:"text-2xl font-bold text-gray-900",children:i("nav.myNumbers")},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:133,columnNumber:11},this),e.jsxDEV("p",{className:"text-sm text-gray-500 mt-1",children:"Vos numéros temporaires et locations actifs"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:134,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:132,columnNumber:9},this),e.jsxDEV(t,{variant:"outline",size:"icon",onClick:k,children:e.jsxDEV(w,{className:`w-4 h-4 ${N?"animate-spin":""}`},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:137,columnNumber:11},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:136,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:131,columnNumber:7},this),N?e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 space-y-4",children:[e.jsxDEV(g,{className:"w-8 h-8 animate-spin text-blue-600"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:143,columnNumber:11},this),e.jsxDEV("p",{className:"text-gray-500",children:"Chargement de vos numéros..."},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:144,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:142,columnNumber:9},this):j?e.jsxDEV("div",{className:"space-y-4",children:u.map(s=>e.jsxDEV("div",{children:[e.jsxDEV(q,{className:"hidden md:block p-0 overflow-hidden border-l-4 border-l-green-500 shadow-sm hover:shadow-md transition-all",children:e.jsxDEV("div",{className:"p-5",children:[e.jsxDEV("div",{className:"flex items-start justify-between gap-4",children:[e.jsxDEV("div",{className:"flex items-center gap-4",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{src:h(s.service_code),alt:s.service_code,className:"w-12 h-12 rounded-xl object-contain bg-gray-50 p-1",onError:r=>r.target.src="/placeholder.png"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:176,columnNumber:25},this),e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 w-5 h-5 bg-white rounded-full flex items-center justify-center shadow-sm",children:e.jsxDEV("span",{className:"text-xs",children:S(s.country_code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:183,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:182,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:175,columnNumber:23},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"flex items-center gap-2",children:[e.jsxDEV("h3",{className:"font-bold text-lg tabular-nums tracking-tight text-gray-900",children:s.phone},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:189,columnNumber:27},this),d(s.status)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:188,columnNumber:25},this),e.jsxDEV("p",{className:"text-xs text-gray-500 font-medium uppercase tracking-wide mt-0.5",children:[s.type==="rental"?"Location":"Activation"," • ",s.service_code]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:194,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:187,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:174,columnNumber:21},this),e.jsxDEV(t,{variant:"ghost",size:"icon",className:"h-8 w-8 text-gray-400",onClick:()=>m(s.phone),children:e.jsxDEV(c,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:202,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:201,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:172,columnNumber:19},this),s.type==="activation"&&s.sms_code&&e.jsxDEV("div",{className:"mt-4 p-3 bg-green-50 border border-green-100 rounded-xl flex items-center justify-between",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"w-8 h-8 rounded-full bg-green-100 text-green-600 flex items-center justify-center",children:e.jsxDEV(A,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:211,columnNumber:27},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:210,columnNumber:25},this),e.jsxDEV("div",{children:[e.jsxDEV("p",{className:"text-xs text-green-700 font-bold uppercase",children:"Code SMS"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:214,columnNumber:27},this),e.jsxDEV("p",{className:"text-lg font-mono font-bold text-green-800 tracking-widest",children:s.sms_code},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:215,columnNumber:27},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:213,columnNumber:25},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:209,columnNumber:23},this),e.jsxDEV(t,{size:"sm",variant:"ghost",className:"text-green-700 hover:bg-green-100",onClick:()=>m(s.sms_code),children:e.jsxDEV(c,{className:"w-4 h-4"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:219,columnNumber:25},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:218,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:208,columnNumber:21},this),e.jsxDEV("div",{className:"mt-4 flex items-center gap-4 text-xs text-gray-400 border-t pt-3",children:[e.jsxDEV("div",{className:"flex items-center gap-1.5 basis-1/2",children:[e.jsxDEV(p,{className:"w-3.5 h-3.5"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:227,columnNumber:23},this),e.jsxDEV("span",{children:s.type==="activation"?`Expire: ${x(s.expires_at)}`:`Fin: ${x(s.end_date)}`},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:228,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:226,columnNumber:21},this),e.jsxDEV("div",{className:"flex items-center gap-1.5 basis-1/2 justify-end",children:e.jsxDEV("span",{className:"font-medium text-gray-600",children:[s.type==="rental"?s.total_cost:s.price," Ⓐ"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:236,columnNumber:23},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:235,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:225,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:171,columnNumber:17},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:170,columnNumber:15},this),e.jsxDEV("div",{className:"md:hidden bg-white rounded-2xl p-4 shadow-sm border border-gray-100 relative overflow-hidden",children:[e.jsxDEV("div",{className:"absolute top-0 left-0 w-1 h-full bg-green-500"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:247,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between mb-3",children:[e.jsxDEV("div",{className:"flex items-center gap-3",children:[e.jsxDEV("div",{className:"relative",children:[e.jsxDEV("img",{src:h(s.service_code),alt:s.service_code,className:"w-10 h-10 rounded-lg object-contain bg-gray-50 p-1",onError:r=>r.target.src="/placeholder.png"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:252,columnNumber:23},this),e.jsxDEV("div",{className:"absolute -bottom-1 -right-1 w-4 h-4 bg-white rounded-full flex items-center justify-center shadow-sm text-[10px]",children:S(s.country_code)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:258,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:251,columnNumber:21},this),e.jsxDEV("div",{children:[e.jsxDEV("div",{className:"font-bold text-base text-gray-900 flex items-center gap-2",children:s.phone},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:263,columnNumber:23},this),e.jsxDEV("p",{className:"text-[10px] text-gray-500 uppercase font-medium",children:s.service_code},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:266,columnNumber:23},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:262,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:250,columnNumber:19},this),e.jsxDEV(t,{variant:"ghost",size:"sm",className:"h-8 w-8 -mr-2",onClick:()=>m(s.phone),children:e.jsxDEV(c,{className:"w-4 h-4 text-gray-400"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:270,columnNumber:21},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:269,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:249,columnNumber:17},this),e.jsxDEV("div",{className:"flex items-center justify-between bg-gray-50 rounded-lg p-2 mb-3",children:[d(s.status),e.jsxDEV("div",{className:"flex items-center text-xs text-gray-500 gap-1",children:[e.jsxDEV(p,{className:"w-3 h-3"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:278,columnNumber:21},this),e.jsxDEV("span",{children:T(s.type==="activation"?s.expires_at:s.end_date)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:279,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:277,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:275,columnNumber:17},this),s.type==="activation"&&s.sms_code?e.jsxDEV("div",{className:"bg-green-50 border border-green-100 rounded-xl p-3 flex flex-col items-center justify-center text-center gap-1 cursor-pointer active:scale-[0.98] transition-all",onClick:()=>m(s.sms_code),children:[e.jsxDEV("p",{className:"text-[10px] text-green-600 font-bold uppercase tracking-wider",children:"Votre Code"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:288,columnNumber:21},this),e.jsxDEV("p",{className:"text-2xl font-mono font-black text-green-700 tracking-[0.2em]",children:s.sms_code},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:289,columnNumber:21},this),e.jsxDEV("p",{className:"text-[10px] text-green-500/80",children:"Tapez pour copier"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:290,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:287,columnNumber:19},this):s.type==="activation"&&e.jsxDEV("div",{className:"bg-gray-50 border border-gray-100 border-dashed rounded-xl p-3 flex items-center justify-center gap-2 text-gray-400",children:[e.jsxDEV(g,{className:"w-4 h-4 animate-spin"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:294,columnNumber:21},this),e.jsxDEV("span",{className:"text-xs",children:"En attente du SMS..."},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:295,columnNumber:21},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:293,columnNumber:19},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:246,columnNumber:15},this)]},`${s.type}-${s.id}`,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:167,columnNumber:13},this))},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:165,columnNumber:9},this):e.jsxDEV("div",{className:"flex flex-col items-center justify-center py-12 px-4 text-center space-y-6 bg-gray-50 rounded-3xl border border-gray-100/50 dashed",children:[e.jsxDEV("div",{className:"w-16 h-16 bg-blue-50 text-blue-500 rounded-full flex items-center justify-center mb-2",children:e.jsxDEV(_,{className:"w-8 h-8"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:149,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:148,columnNumber:11},this),e.jsxDEV("div",{className:"space-y-2",children:[e.jsxDEV("h3",{className:"text-lg font-semibold text-gray-900",children:"Aucun numéro actif"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:152,columnNumber:13},this),e.jsxDEV("p",{className:"text-sm text-gray-500 max-w-xs mx-auto",children:"Vous n'avez aucun numéro en cours d'utilisation. Achetez un numéro pour commencer."},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:153,columnNumber:13},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:151,columnNumber:11},this),e.jsxDEV("div",{className:"flex gap-3",children:e.jsxDEV(t,{className:"rounded-xl",onClick:()=>window.location.href="/buy",children:[e.jsxDEV(C,{className:"w-4 h-4 mr-2"},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:159,columnNumber:15},this),"Acheter un numéro"]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:158,columnNumber:13},this)},void 0,!1,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:157,columnNumber:11},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:147,columnNumber:9},this)]},void 0,!0,{fileName:"/Users/mac/Desktop/ONE SMS V1/src/pages/MyNumbersPage.tsx",lineNumber:128,columnNumber:5},this)}export{$ as default};
